Version 4
SHEET 1 1484 1292
WIRE 1280 -400 1280 -416
WIRE 432 -384 432 -416
WIRE 800 -384 800 -416
WIRE 368 -336 336 -336
WIRE 736 -336 704 -336
WIRE 1280 -304 1280 -320
WIRE 1312 -304 1280 -304
WIRE 1408 -304 1392 -304
WIRE 1280 -288 1280 -304
WIRE 432 -272 432 -288
WIRE 528 -272 432 -272
WIRE 800 -272 800 -288
WIRE 896 -272 800 -272
WIRE 432 -256 432 -272
WIRE 800 -256 800 -272
WIRE 1120 -240 1104 -240
WIRE 1216 -240 1200 -240
WIRE 432 -160 432 -176
WIRE 800 -160 800 -176
WIRE 1280 -160 1280 -192
WIRE -288 -144 -288 -160
WIRE -320 -128 -352 -128
WIRE -176 -112 -256 -112
WIRE -528 -96 -544 -96
WIRE -320 -96 -448 -96
WIRE -288 -64 -288 -80
WIRE 704 -64 688 -64
WIRE 800 -64 784 -64
WIRE 496 -48 480 -48
WIRE 592 -48 576 -48
WIRE -560 32 -560 16
WIRE 752 32 752 16
WIRE -592 48 -624 48
WIRE 496 48 480 48
WIRE 592 48 592 -48
WIRE 592 48 576 48
WIRE 688 48 688 -64
WIRE 688 48 592 48
WIRE 720 48 688 48
WIRE -448 64 -528 64
WIRE -320 64 -448 64
WIRE 32 64 0 64
WIRE 224 64 208 64
WIRE 800 64 800 -64
WIRE 800 64 784 64
WIRE 848 64 800 64
WIRE 944 64 928 64
WIRE -864 80 -880 80
WIRE -768 80 -800 80
WIRE -592 80 -768 80
WIRE 720 80 688 80
WIRE -448 96 -448 64
WIRE 32 96 -32 96
WIRE 272 96 208 96
WIRE -768 112 -768 80
WIRE -560 112 -560 96
WIRE 688 112 688 80
WIRE 752 112 752 96
WIRE -176 128 -176 -112
WIRE 32 128 -176 128
WIRE 224 128 208 128
WIRE -176 144 -176 128
WIRE 496 144 480 144
WIRE 592 144 592 48
WIRE 592 144 576 144
WIRE 32 160 -32 160
WIRE 272 160 208 160
WIRE -448 192 -448 176
WIRE 32 192 16 192
WIRE -768 208 -768 192
WIRE 32 224 -32 224
WIRE 272 224 208 224
WIRE -560 240 -560 224
WIRE -176 240 -176 224
WIRE 496 240 480 240
WIRE 592 240 592 144
WIRE 592 240 576 240
WIRE -976 256 -992 256
WIRE -880 256 -880 80
WIRE -880 256 -896 256
WIRE -864 256 -880 256
WIRE -768 256 -800 256
WIRE -592 256 -624 256
WIRE 32 256 16 256
WIRE 240 256 208 256
WIRE -448 272 -528 272
WIRE -416 272 -448 272
WIRE -320 272 -336 272
WIRE -768 288 -768 256
WIRE -592 288 -768 288
WIRE 32 288 -32 288
WIRE 240 288 208 288
WIRE -448 304 -448 272
WIRE -560 320 -560 304
WIRE -976 368 -992 368
WIRE -864 368 -896 368
WIRE -768 368 -768 288
WIRE -768 368 -800 368
WIRE -448 400 -448 384
WIRE -768 416 -768 368
WIRE 704 448 688 448
WIRE 800 448 784 448
WIRE -768 512 -768 496
WIRE -1296 528 -1296 512
WIRE -1152 528 -1248 528
WIRE 752 544 752 528
WIRE 208 560 176 560
WIRE 496 560 480 560
WIRE 592 560 576 560
WIRE 688 560 688 448
WIRE 688 560 592 560
WIRE 720 560 688 560
WIRE 800 576 800 448
WIRE 800 576 784 576
WIRE 848 576 800 576
WIRE 944 576 928 576
WIRE -1248 592 -1248 528
WIRE -1232 592 -1248 592
WIRE 256 592 176 592
WIRE 720 592 688 592
WIRE -1152 608 -1152 528
WIRE -1152 608 -1168 608
WIRE -1120 608 -1152 608
WIRE -1296 624 -1296 608
WIRE -1296 624 -1392 624
WIRE -1232 624 -1296 624
WIRE -64 624 -96 624
WIRE 48 624 -64 624
WIRE 208 624 176 624
WIRE 688 624 688 592
WIRE 752 624 752 608
WIRE -1296 640 -1296 624
WIRE -992 640 -992 624
WIRE -880 640 -880 624
WIRE -1392 656 -1392 624
WIRE -64 656 -64 624
WIRE 48 656 -32 656
WIRE 256 656 176 656
WIRE 496 656 480 656
WIRE 592 656 592 560
WIRE 592 656 576 656
WIRE 48 688 32 688
WIRE 208 688 176 688
WIRE 48 720 32 720
WIRE 256 720 176 720
WIRE -1392 736 -1392 720
WIRE -1296 736 -1296 720
WIRE -992 736 -992 720
WIRE -880 736 -880 720
WIRE -768 736 -768 720
WIRE -656 736 -656 720
WIRE -64 752 -64 736
WIRE 208 752 176 752
WIRE 496 752 480 752
WIRE 592 752 592 656
WIRE 592 752 576 752
WIRE 208 784 176 784
WIRE 256 784 208 784
WIRE 496 848 480 848
WIRE 592 848 592 752
WIRE 592 848 576 848
WIRE -352 864 -352 848
WIRE -384 880 -416 880
WIRE -160 896 -320 896
WIRE -32 896 -32 656
WIRE -32 896 -160 896
WIRE -576 912 -592 912
WIRE -384 912 -496 912
WIRE -160 912 -160 896
WIRE -352 944 -352 928
WIRE 496 944 480 944
WIRE 592 944 592 848
WIRE 592 944 576 944
WIRE -160 1008 -160 992
WIRE 96 1008 96 992
WIRE 208 1008 208 784
WIRE 496 1040 480 1040
WIRE 592 1040 592 944
WIRE 592 1040 576 1040
WIRE 96 1104 96 1088
WIRE 96 1104 -48 1104
WIRE 96 1120 96 1104
WIRE 496 1136 480 1136
WIRE 592 1136 592 1040
WIRE 592 1136 576 1136
WIRE 208 1168 208 1088
WIRE 208 1168 160 1168
WIRE 496 1232 480 1232
WIRE 592 1232 592 1136
WIRE 592 1232 576 1232
WIRE 96 1248 96 1216
FLAG -992 624 V
IOPIN -992 624 Out
FLAG -992 736 0
FLAG -880 624 c-up
IOPIN -880 624 Out
FLAG -768 640 c-dwn
IOPIN -768 640 Out
FLAG -880 736 0
FLAG -768 736 0
FLAG -992 368 c-dwn
IOPIN -992 368 In
FLAG -992 256 c-up
IOPIN -992 256 In
FLAG -768 512 0
FLAG -320 64 ud
IOPIN -320 64 Out
FLAG -320 272 clk
IOPIN -320 272 Out
FLAG -560 224 V
IOPIN -560 224 In
FLAG -560 320 0
FLAG -1296 512 V
IOPIN -1296 512 In
FLAG -1392 736 0
FLAG -1296 736 0
FLAG -1120 608 Vref
IOPIN -1120 608 Out
FLAG -624 256 Vref
IOPIN -624 256 In
FLAG -448 400 0
FLAG -560 112 0
FLAG -624 48 Vref
IOPIN -624 48 In
FLAG -448 192 0
FLAG -768 208 0
FLAG 0 64 0
FLAG -32 96 ud
IOPIN -32 96 In
FLAG -32 160 clk
IOPIN -32 160 In
FLAG 240 256 V
IOPIN 240 256 In
FLAG 240 288 0
FLAG 272 224 V
IOPIN 272 224 In
FLAG 752 16 V
IOPIN 752 16 In
FLAG 752 112 0
FLAG 688 112 Vref
IOPIN 688 112 In
FLAG 224 64 Q1
IOPIN 224 64 Out
FLAG 272 96 Q2
IOPIN 272 96 Out
FLAG 224 128 Q3
IOPIN 224 128 Out
FLAG 272 160 Q4
IOPIN 272 160 Out
FLAG 480 -48 Q1
IOPIN 480 -48 In
FLAG 480 48 Q2
IOPIN 480 48 In
FLAG 480 144 Q3
IOPIN 480 144 In
FLAG 480 240 Q4
IOPIN 480 240 In
FLAG 32 720 0
FLAG 32 688 V
IOPIN 32 688 In
FLAG 96 1248 0
FLAG 96 992 V
IOPIN 96 992 In
FLAG -96 624 Q1
IOPIN -96 624 In
FLAG -64 752 0
FLAG 208 560 X1
IOPIN 208 560 Out
FLAG 256 592 X2
IOPIN 256 592 Out
FLAG 208 624 X3
IOPIN 208 624 Out
FLAG 256 656 X4
IOPIN 256 656 Out
FLAG 208 688 X5
IOPIN 208 688 Out
FLAG 256 720 X6
IOPIN 256 720 Out
FLAG 208 752 X7
IOPIN 208 752 Out
FLAG 256 784 X8
IOPIN 256 784 Out
FLAG -1200 576 V
IOPIN -1200 576 In
FLAG -1200 640 0
FLAG 480 560 X1
IOPIN 480 560 In
FLAG 480 656 X2
IOPIN 480 656 In
FLAG 480 752 X3
IOPIN 480 752 In
FLAG 480 848 X4
IOPIN 480 848 In
FLAG 480 944 X5
IOPIN 480 944 In
FLAG 480 1040 X6
IOPIN 480 1040 In
FLAG 480 1136 X7
IOPIN 480 1136 In
FLAG 480 1232 X8
IOPIN 480 1232 In
FLAG 944 64 saw
IOPIN 944 64 Out
FLAG 752 528 V
IOPIN 752 528 In
FLAG 752 624 0
FLAG 688 624 Vref
IOPIN 688 624 In
FLAG 944 576 Sine
IOPIN 944 576 Out
FLAG 16 192 X7
IOPIN 16 192 In
FLAG -32 224 X1
IOPIN -32 224 In
FLAG 16 256 X3
IOPIN 16 256 In
FLAG -32 288 X5
IOPIN -32 288 In
FLAG -656 640 PE
IOPIN -656 640 Out
FLAG -656 736 0
FLAG -544 -96 PE
IOPIN -544 -96 In
FLAG -592 912 DATA
IOPIN -592 912 In
FLAG -48 1104 DATA
IOPIN -48 1104 Out
FLAG 800 -416 V
IOPIN 800 -416 In
FLAG 800 -160 0
FLAG 896 -272 D3
IOPIN 896 -272 Out
FLAG 704 -336 Q3
IOPIN 704 -336 In
FLAG 432 -416 V
IOPIN 432 -416 In
FLAG 432 -160 0
FLAG 528 -272 D2
IOPIN 528 -272 Out
FLAG 336 -336 Q2
IOPIN 336 -336 In
FLAG -560 16 V
IOPIN -560 16 In
FLAG -288 -64 0
FLAG -352 -128 Vref
IOPIN -352 -128 In
FLAG -288 -160 V
IOPIN -288 -160 In
FLAG -352 944 0
FLAG -416 880 Vref
IOPIN -416 880 In
FLAG -352 848 V
IOPIN -352 848 In
FLAG -176 240 0
FLAG -160 1008 0
FLAG 1280 -160 0
FLAG 1280 -416 V
IOPIN 1280 -416 In
FLAG 1104 -240 DATA
IOPIN 1104 -240 In
FLAG 1408 -304 G1
IOPIN 1408 -304 Out
SYMBOL voltage -992 624 R0
SYMATTR InstName V1
SYMATTR Value 9
SYMBOL voltage -880 624 R0
WINDOW 3 24 96 Invisible 2
SYMATTR Value PULSE(0 9 0 0.000001 0.000001 0.1 0.2 50)
SYMATTR InstName V2
SYMBOL voltage -768 624 R0
WINDOW 3 24 96 Invisible 2
SYMATTR Value PULSE(0 9 0 0.0000001 0.0000001 0.033 0.066 50)
SYMATTR InstName V3
SYMBOL diode -864 272 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL diode -864 384 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D2
SYMATTR Value 1N4148
SYMBOL res -784 400 R0
SYMATTR InstName R1
SYMATTR Value 2.2Meg
SYMBOL res -880 352 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 100k
SYMBOL res -880 240 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 100k
SYMBOL res -1280 736 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R2
SYMATTR Value 22k
SYMBOL res -1280 624 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R3
SYMATTR Value 22k
SYMBOL polcap -1376 656 M0
SYMATTR InstName C1
SYMATTR Value 1µF
SYMBOL res -464 288 R0
SYMATTR InstName R6
SYMATTR Value 100k
SYMBOL OpAmps/opamp2 -560 208 R0
SYMATTR InstName U1
SYMATTR Value lm324
SYMBOL diode -864 96 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D3
SYMATTR Value 1N4148
SYMBOL OpAmps/opamp2 -560 0 R0
SYMATTR InstName U2
SYMATTR Value lm324
SYMBOL res -464 80 R0
SYMATTR InstName R7
SYMATTR Value 100k
SYMBOL res -784 96 R0
SYMATTR InstName R8
SYMATTR Value 2.2Meg
SYMBOL CD4000/CD4029B 112 176 R0
SYMATTR InstName U3
SYMBOL res 592 -64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 47k
SYMBOL res 592 32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 22k
SYMBOL res 592 128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 10k
SYMBOL res 592 224 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 4.7k
SYMBOL res -320 256 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 10k
SYMBOL OpAmps/opamp2 752 0 R0
SYMATTR InstName U4
SYMATTR Value lm324
SYMBOL res 800 -80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R15
SYMATTR Value 2.2k
SYMBOL CD4015 112 672 R0
SYMATTR InstName X5
SYMBOL npn 160 1120 M0
SYMATTR InstName Q1
SYMATTR Value BC547C
SYMBOL res 192 992 R0
SYMATTR InstName R16
SYMATTR Value 10k
SYMBOL res 80 992 R0
SYMATTR InstName R17
SYMATTR Value 100k
SYMBOL res -48 640 M0
SYMATTR InstName R18
SYMATTR Value 100k
SYMBOL OpAmps/opamp2 -1200 544 R0
SYMATTR InstName U5
SYMATTR Value lm324
SYMBOL res 592 544 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R19
SYMATTR Value 120k
SYMBOL res 592 640 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R20
SYMATTR Value 150k
SYMBOL res 592 736 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R21
SYMATTR Value 180k
SYMBOL res 592 832 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R22
SYMATTR Value 220k
SYMBOL res 592 928 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R23
SYMATTR Value 180k
SYMBOL res 592 1024 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R24
SYMATTR Value 150k
SYMBOL res 592 1120 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R25
SYMATTR Value 120k
SYMBOL res 592 1216 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R26
SYMATTR Value 100k
SYMBOL OpAmps/opamp2 752 512 R0
SYMATTR InstName U6
SYMATTR Value lm324
SYMBOL res 800 432 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R27
SYMATTR Value 15k
SYMBOL voltage -656 624 R0
WINDOW 3 24 96 Invisible 2
SYMATTR Value PULSE(0 9 0 0.0000001 0.0000001 0.01 1.25 50)
SYMATTR InstName V4
SYMBOL res -432 -112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R28
SYMATTR Value 100k
SYMBOL res -480 896 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R32
SYMATTR Value 100k
SYMBOL npn 736 -384 R0
SYMATTR InstName Q6
SYMATTR Value BC547C
SYMBOL res 784 -272 R0
SYMATTR InstName R36
SYMATTR Value 10k
SYMBOL npn 368 -384 R0
SYMATTR InstName Q4
SYMATTR Value BC547C
SYMBOL res 416 -272 R0
SYMATTR InstName R33
SYMATTR Value 10k
SYMBOL OpAmps/opamp2 -288 -176 R0
SYMATTR InstName U7
SYMATTR Value lm324
SYMBOL OpAmps/opamp2 -352 832 R0
SYMATTR InstName U8
SYMATTR Value lm324
SYMBOL res -160 128 M0
SYMATTR InstName R31
SYMATTR Value 100k
SYMBOL res 944 48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value 10k
SYMBOL res 944 560 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R34
SYMATTR Value 10k
SYMBOL res -144 896 M0
SYMATTR InstName R29
SYMATTR Value 100k
SYMBOL npn 1216 -288 R0
SYMATTR InstName Q2
SYMATTR Value BC547C
SYMBOL res 1296 -416 M0
SYMATTR InstName R30
SYMATTR Value 100k
SYMBOL res 1296 -320 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R37
SYMATTR Value 10k
SYMBOL res 1104 -256 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R38
SYMATTR Value 1Meg
TEXT -1248 -24 Left 2 !.startup\n.include lm324ti.lib\n.param vdd=9\n.param speed=100us\n.param tripdt=100us\n.tran 10
